<html ng-app="emailerApp" >
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.8/angular-material.min.css">
	<link rel="stylesheet" type="text/css" href="/emailer/emailer.css">
</head>
<title>Game Time Email App</title>
<body ng-controller="emailerController" ng-cloak>

<div layout="column">
	<md-toolbar class="toolbar">
		<h2>Game Time Email App</h2>
	</md-toolbar>
	
	<div ng-show="isLoading" flex="90" layout="row" layout-align="center center">
		<div layout="column" layout="center center">
			<md-progress-circular class="md-primary md-margin" md-diameter="40"></md-progress-circular>
			<div class="md-margin">Loading</div>
		</div>
	</div>
	
	<div layout="row" class="md-padding" ng-show="!isLoading">
		<div layout="row" flex flex-gt-sm="75" layout-align="center center">
			<md-input-container flex>
				<label>Email Template</label>
				<md-select ng-model="selectedFile" ng-change="changeTemplate()">
					<md-option ng-repeat="template in templates" ng-value="template.file">{{template.name}}</md-option>
				</md-select>
			</md-input-container>
			
			<md-input-container flex>
				<label>To Group</label>
				<md-select ng-model="selectedGroup">
					<md-option ng-repeat="group in emailGroups" ng-value="group">{{group}}</md-option>
				</md-select>
			</md-input-container>
			
			<div>
				<md-button class="md-raised md-primary" ng-disabled="!selectedFile || !selectedGroup" ng-click="send($event)">Send Email</md-button>
			</div>
		</div>
	</div>
	
	<div flex="70" class="md-padding" layout="row" ng-show="!isLoading && frameUrl">
		<iframe flex="100" flex-gt-sm="75" ng-src="{{frameUrl}}"></iframe>
	</div>
	
</div>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-animate.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-aria.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-messages.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.8/angular-material.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.9.1/d3.js"></script>

<script src="/emailer/emailer.js"></script>

</body>
</html>