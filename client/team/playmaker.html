<link rel="stylesheet" type="text/css" href="/team/playmaker.css">

<div ng-show="isLoading" class="loadingContainer">
	<div class="loadingContent">
		<div>Loading</div>
	</div>
</div>

<div ng-show="!isLoading" class="playPage">
	
	<div class="content">
		
		<div class="propertiesContainer">
			
			<div class="property expanded">
				<input type="text" ng-model="playData.formation" placeholder="Formation" />
			</div>
			
			<div class="property expanded">
				<input type="text" ng-model="playData.name" placeholder="Name" />
			</div>
			
			<div class="controlButton" ng-click="savePlay()">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px">
					<path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/>
				</svg>
			</div>
			
			<div class="controlButton" ng-click="copyPlay()">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px">
					<path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
				</svg>
			</div>
			
			<div class="controlButton" ng-click="deletePlay()" ng-show="playData.id">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px">
					<path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"/>
				</svg>
			</div>
			
		</div>
		
		<svg class="playDesigner" viewBox="0 0 400 410" ng-click="designerClick($event)">
			<defs>
				<marker id="arrow-red" viewBox="0 0 10 10" refX="1" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse" fill="red"><polygon points="0 1.5, 10 5, 0 8.5" /></marker>
				<marker id="arrow-blue" viewBox="0 0 10 10" refX="1" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse" fill="blue"><polygon points="0 1.5, 10 5, 0 8.5" /></marker>
				<marker id="arrow-orange" viewBox="0 0 10 10" refX="1" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse" fill="orange"><polygon points="0 1.5, 10 5, 0 8.5" /></marker>
				<marker id="arrow-black" viewBox="0 0 10 10" refX="1" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse" fill="black"><polygon points="0 1.5, 10 5, 0 8.5" /></marker>
				<marker id="arrow-green" viewBox="0 0 10 10" refX="1" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse" fill="green"><polygon points="0 1.5, 10 5, 0 8.5" /></marker>
				<marker id="arrow-purple" viewBox="0 0 10 10" refX="1" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse" fill="purple"><polygon points="0 1.5, 10 5, 0 8.5" /></marker>
				<marker id="arrow-lightblue" viewBox="0 0 10 10" refX="1" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse" fill="lightblue"><polygon points="0 1.5, 10 5, 0 8.5" /></marker>
				
				<marker id="block-red" viewBox="0 0 10 10" refX="1" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse" fill="red"><rect x="0" y="1" width="3" height="10"></rect></marker>
				<marker id="block-blue" viewBox="0 0 10 10" refX="1" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse" fill="blue"><rect x="0" y="1" width="3" height="10"></rect></marker>
				<marker id="block-orange" viewBox="0 0 10 10" refX="1" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse" fill="orange"><rect x="0" y="1" width="3" height="10"></rect></marker>
				<marker id="block-black" viewBox="0 0 10 10" refX="1" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse" fill="black"><rect x="0" y="1" width="3" height="10"></rect></marker>
				<marker id="block-green" viewBox="0 0 10 10" refX="1" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse" fill="green"><rect x="0" y="1" width="3" height="10"></rect></marker>
				<marker id="block-purple" viewBox="0 0 10 10" refX="1" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse" fill="purple"><rect x="0" y="1" width="3" height="10"></rect></marker>
				<marker id="block-lightblue" viewBox="0 0 10 10" refX="1" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse" fill="lightblue"><rect x="0" y="1" width="3" height="10"></rect></marker>
			</defs>
			
			<line x1="0" y1="{{scrimmageLine}}" x2="400" y2="{{scrimmageLine}}"></line>
			
			<circle ng-repeat="player in playData.players" 
				r="8" cx="{{player.location.x}}" cy="{{player.location.y}}" 
				fill="{{player.color}}" stroke="{{player.color}}" 
				class="player" 
				ng-class="{'selectedMove': player == selected.player && selected.mode == 'move', 'selectedRoute': player == selected.player && selected.mode == 'route' }"
				ng-click="selectPlayer(player)">
			</circle>
			
			<path ng-repeat="route in routes" d="{{route.path}}" stroke="{{route.color}}" marker-end="{{'url(#' + route.cap + '-' + route.color + ')'}}" ng-class="{'run': route.routeType === 'run'}"></path>
		</svg>
		
		<div class="controlContainer">
			
			<div class="controlButton expanded" ng-click="addPlayer()">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
					<path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
				</svg>
			</div>
			
			<div class="controlButton" ng-show="selected.player" ng-click="delete()">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px">
					<path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
				</svg>
			</div>
			
			<div class="controlButton" ng-show="selected.player && selected.player.routeType === 'straight'" ng-click="changeRouteType()">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
					<path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
				</svg>
			</div>
			
			<div class="controlButton" ng-show="selected.player && selected.player.routeType === 'curved'" ng-click="changeRouteType()">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
					<path d="M4.59 6.89c.7-.71 1.4-1.35 1.71-1.22.5.2 0 1.03-.3 1.52-.25.42-2.86 3.89-2.86 6.31 0 1.28.48 2.34 1.34 2.98.75.56 1.74.73 2.64.46 1.07-.31 1.95-1.4 3.06-2.77 1.21-1.49 2.83-3.44 4.08-3.44 1.63 0 1.65 1.01 1.76 1.79-3.78.64-5.38 3.67-5.38 5.37 0 1.7 1.44 3.09 3.21 3.09 1.63 0 4.29-1.33 4.69-6.1H21v-2.5h-2.47c-.15-1.65-1.09-4.2-4.03-4.2-2.25 0-4.18 1.91-4.94 2.84-.58.73-2.06 2.48-2.29 2.72-.25.3-.68.84-1.11.84-.45 0-.72-.83-.36-1.92.35-1.09 1.4-2.86 1.85-3.52.78-1.14 1.3-1.92 1.3-3.28C8.95 3.69 7.31 3 6.44 3 5.12 3 3.97 4 3.72 4.25c-.36.36-.66.66-.88.93l1.75 1.71zm9.29 11.66c-.31 0-.74-.26-.74-.72 0-.6.73-2.2 2.87-2.76-.3 2.69-1.43 3.48-2.13 3.48z"/>
				</svg>
			</div>
			
			<div class="controlButton" ng-show="selected.player && selected.player.routeType === 'run'" ng-click="changeRouteType()">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px">
					<path d="M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z"/>
				</svg>
			</div>
			
			<div class="controlButton" ng-show="selected.player && selected.player.routeAction === 'run'" ng-click="changeRouteAction()">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px">
					<path d="M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z"/>
				</svg>
			</div>
			
			<div class="controlButton" ng-show="selected.player && selected.player.routeAction === 'block'" ng-click="changeRouteAction()">
				<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24" width="24px" height="24px">
					<g>
						<g>
							<g>
								<path d="M23,5.5V20c0,2.2-1.8,4-4,4h-7.3c-1.08,0-2.1-0.43-2.85-1.19L1,14.83c0,0,1.26-1.23,1.3-1.25 c0.22-0.19,0.49-0.29,0.79-0.29c0.22,0,0.42,0.06,0.6,0.16C3.73,13.46,8,15.91,8,15.91V4c0-0.83,0.67-1.5,1.5-1.5S11,3.17,11,4v7 h1V1.5C12,0.67,12.67,0,13.5,0S15,0.67,15,1.5V11h1V2.5C16,1.67,16.67,1,17.5,1S19,1.67,19,2.5V11h1V5.5C20,4.67,20.67,4,21.5,4 S23,4.67,23,5.5z"/>
							</g>
						</g>
					</g>
				</svg>
			</div>
			
			<div class="controlButton" ng-show="selected.player">
				<select ng-model="selected.player.color" ng-change="changeColor()">
					<option value="red">Red</option>
					<option value="blue">Blue</option>
					<option value="orange">Orange</option>
					<option value="green">Green</option>
					<option value="black">Black</option>
					<option value="purple">Purple</option>
					<option value="lightblue">Light Blue</option>
				</select>
			</div>
			
		</div>
	
	</div>
	
</div>
